Модули Math, Decimal и Numpy
==============================================================================

## 1. Модулът Math.

- Модулът е вграден модули в Python, който осигурява достъп до математическите функции, дефинирани от стандартната библиотека C. За да го изпозлваме, трябва в началото на програмата да го добавим чрез ```import math```
- Включва функции за извършване на общи математически операции, като тригонометрични функции, експоненциални и логаритмични функции и други. Тези функции обикновено работят с числа с плаваща запетая, които имат крайна точност и са обект на грешки при закръгляване.
- Включват се познататите ни константи числа като π, e и други.
- Всички функции може да разгледате в таблицата:<br>

| Метод      | Описание                                            |
|------------|-----------------------------------------------------|
| math.acos() | Връща аркус косинус на дадено число                  |
| math.acosh()| Връща обратен хиперболичен косинус на дадено число   |
| math.asin() | Връща аркус синус на дадено число                    |
| math.asinh() | Връща обратен хиперболичен синус на дадено число                  |
| math.atan() | Връща аркус тангенс на дадено число в радиани                    |
| math.atan2() | Връща аркус тангенс на y/x в радиани                   |
| math.atanh() | Връща обратен хиперболичен тангенс на дадено число                   |
| math.ceil() | Закръгля число към по-голямото цяло число                   |
| math.comb() | Връща броя на начините, по които можем да изберем k елемента от n елемента без повторения и ред                   |
| math.copysign() | Връща число, съставено от стойността на първия параметър и знака на втория параметър                   |
| math.cos() | Връща косинус на дадено число                   |
| math.cosh() | Връща хиперболичен косинус на дадено число                   |
| math.degrees() | Конвертира ъгъл от радиани в градуси                   |
| math.dist() | Връща евклидовото разстояние между две точки (p и q), където p и q са координатите на тези точки                    |
| math.erf() | Връща грешката при изчислението на интеграла на Гаус със зададено число                   |
| math.erfc() | Връща допълнителната грешка при изчислението на интеграла на Гаус със зададено число                   |
| math.exp() | Връща E повдигнато на степен x                  |
| math.expm1() | Връща Ex - 1                   |
| math.fabs() | Връща абсолютната стойност на число                   |
| math.factorial() | Връща факториел от число                   |
| math.floor() | Закръгля число към по-малкото цяло число                  |
| math.fmod() | Връща остатъка при деление на x/y                   |
| math.frexp()| Връща мантисата и експонента на дадено число                  |
| math.fsum() | Връща сумата на всички елементи в списък (кортеж, масив и т.н.)                  |
| math.gamma() | Връща гама функция на x                  |
| math.gcd() |  Връща най-големия общ делит                  |
| math.acos() |  Връща аркус косинус на дадено число                 |
| math.acosh() |  Връща обратен хиперболичен косинус на дадено число                 |
| math.asin() |  Връща аркус синус на дадено число                 |
| math.asinh() |  Връща обратен хиперболичен синус на дадено число                  |
| math.atan() |  Връща аркус тангенс на дадено число в радиани                 |
| math.atan2() |  Връща аркус тангенс на y/x в радиани                 |
| math.atanh() |  Връща обратен хиперболичен тангенс на дадено число                 |
| math.ceil() |  Закръгля число към по-голямото цяло число                |
| math.atan() |  Връща аркус тангенс на дадено число в радиани                 | 
| math.comb() | Връща броя на начините, по които можем да изберем k елемента от n елемента без повторения и ред   |
| math.copysign() | Връща число, съставено от стойността на първия параметър и знака на втория параметър   |
| math.cos() | Връща косинус на дадено число   |
| math.cosh() | Връща хиперболичен косинус на дадено число   |
| math.degrees() | Конвертира ъгъл от радиани в градуси   |
| math.dist() | Връща евклидовото разстояние между две точки (p и q), където p и q са координатите на тези точки   |
| math.erf() | Връща грешката при изчислението на интеграла на Гаус със зададено число   |
| math.erfc() | Връща допълнителната грешка при изчислението на интеграла на Гаус със зададено число   |
| math.exp() | Връща E повдигнато на степен x   |
| math.expm1() | Връща Ex - 1   |
| math.fabs() | Връща абсолютната стойност на число   |
| math.factorial() | Връща факториел от число   |
| math.floor() | Закръгля число към по-малкото цяло число   |
| math.fmod() | Връща остатъка при деление на x/y   |
| math.frexp() | Връща мантисата и експонента на дадено число   |
| math.fsum() | Връща сумата на всички елементи в списък (кортеж, масив и т.н.)   |
| math.gamma() | Връща гама функция на x   |
| math.gcd() | Връща най-големия общ делител на две или повече числа   |
| math.hypot() | Връща Евклидов   |
 
 
 - Всички константи може да разгледате в таблицата:<br>
 
| Константа| Описание                                               |
|----------|--------------------------------------------------------|
| math.e   | Връща числото на Ойлер (2.7182...)                     |
| math.inf | Връща положителна безкрайност с плаваща запетая        |
| math.nan | Връща стойност на NaN (не е число) с плаваща запетая   |
| math.pi  | Връща числото Пи (3.1415...)                           |
| math.tau | Връща числото тау (6.2831...)                          |


## 2. Модулът Decimal.
- Модулът Decimal осигурява поддръжка за десетична аритметика с произволна точност. Използваме го, като задължително си го включим в началото на програма чрез ```import decimal```
- Предоставя начин за извършване на аритметични операции с десетични числа с произволна точност. Това може да бъде полезно в приложения, които изискват точни десетични изчисления, като например финансови или научни изчисления.
- Точността по подразбиране е 28 цифри, но може да бъде увеличена или намалена според нуждите.
- За да зададете точността за обект Decimal, можете да използвате функцията getcontext(), за да получите текущия контекст и след това да зададете атрибута за точност на контекста. Например, за да зададете точността на 50 цифри:<br>
```py
import decimal
decimal.getcontext().prec = 50
```

- Повече по темата може да видите тук: https://www.pythontutorial.net/advanced-python/python-decimal/


## 3. Decimal vs Math.
- Добавяне на числа с плаваща запетая:<br>
```py
import math
a = 0.1
b = 0.2
c = a + b
print(c)  # Output: 0.30000000000000004

from decimal import Decimal
a = Decimal('0.1')
b = Decimal('0.2')
c = a + b
print(c)  # Output: 0.3
```
- Деление на цели числа:
```py
import math
a = 1
b = 3
c = a / b
print(c)  # Output: 0.3333333333333333

from decimal import Decimal
a = Decimal(1)
b = Decimal(3)
c = a / b
print(c)  # Output: 0.3333333333333333333333333333
```
- Изчисляване на корен квадратен от голямо число:
```py
import math
a = 12345678901234567890
b = math.sqrt(a)
print(b)  # Output: 1.111111111111111e+10

from decimal import Decimal
a = Decimal('12345678901234567890')
b = a.sqrt()
print(b)  # Output: 3513641827.803154567232896955
```


## 3. Модулът NumPy.

## а) Основни елементи
* нов тип данни - `ndarray` (многомерен компактен масив, съдържащ елементи от един и същи тип)
* задаване на размерност - `ndarray.ndim` (ndim = 3 -> тримерен масив)
* задаване на граници на тази размерност - `ndarray.shape` (shape = (2, 3) -> двумерен масив, като ndim = 2 == брой елементи в редицата на shape) с 2 реда и 3 стълба)
* брой елементи - `ndarray.size` (произведението от числава в shape)
* брой байтове, отделени за всеки елемент от масива - `ndarray.itemsize`
* тип данни в масива - ndarray.dtype

### Създаване на масив:
```py
import numpy as np

arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])  # едномерен масив // може да се запише и като np.arange(1,10)
print(arr)  # [1 2 3 4 5 6 7 8 9]
```

* `reshape(брой редове, брой колони, order)` - оразмерява масива
```py
reshaped_arr = arr.reshape((3, 3))  # двумерен масив с 3 реда и 3 колони (оразмеряване на масива)
print(reshaped_arr)  # [[1 2 3][4 5 6][7 8 9]]
```
## б) Основни функции:

* `zeros(shape, dtype, order)` - задава масив от нули
```py
print(np.zeros((1, 2), "int"))  # array([[0, 0]])
```
* `ones(shape, dtype, order)` - задава масив от единици
```py
print(np.ones((1, 2), "int"))  # array([[1, 1]])
```
* `arange(start, stop, step)` - създава едномерен масив
```py
print(np.arange(2, 9, 4))  # array([2, 6])
```
* `linspace(min, max, (n) number of elements in array)` - създава едномерен масив от n елемента, съдържащ min и max, като стъпката я изчислява автоматично
```py
print(np.linspace(4, 10, 5, dtype="int"))  # array([ 4,  5,  7,  8, 10])
print(np.linspace(1, 2, 5, retstep=True))  # (array([1.  , 1.25, 1.5 , 1.75, 2.  ]), 0.25)
```
* `asarray` - конвертира в масив
```py
a_list = [[1, 2], [10, 20]]
print(type(np.asarray(a_list)))  # <class 'numpy.ndarray'>
```
## в) Действия с масиви
- Умножение:
- поелементно:
```py
A = np.array([[1, 1], [0, 1]])
B = np.array([[2, 0], [3, 4]])
print(A * B)
# [1, 1], [0, 1]
#  *  *    *  *
# [2, 0], [3, 4]
#  =  =    =  =
# [2, 0], [0, 4]
```
- на матрици:
```py
print(A.dot(B))  # A = array([[5, 4],[3, 4]])
print(np.dot(A, B))  # C = array([[5, 4],[3, 4]])

print(A.sum())  # 1 + 1 + 0 + 1 = 3
print(A.min(initial=0))  # 0
print(A.max(initial=0))  # 1
print(B.sum(axis=0))  # array([5, 4]) -> сбор по колони (axis=1 - сбор по редове)
```
* забележка: `initial` е хубаво да бъде остойностявано, за да не даде грешка програмата, ако случайно масивът е празен.

- Достъп до елементите в масив:
```py
new_arr = np.arange(15, dtype="int").reshape((3, 5))
# [ 0,  1,  2,  3,  4]
# [ 5,  6,  7,  8,  9]
# [10, 11, 12, 13, 14]

arr1 = new_arr[0:2, 1:3]
print(arr1)
# [1, 2]
# [6, 7]

arr2 = new_arr[:, 1:]
print(arr2)
# [ 1,  2,  3,  4]
# [ 6,  7,  8,  9]
# [11, 12, 13, 14]

arr3 = new_arr[::2, ::3]  # през 1 ред / през 2 колони
print(arr3)
# [ 0,  3]
# [10, 13]
```
- Сортиране:
```py
num_array = np.array([12, -10, 5, 0, -223, 154])
num_array_sorted = np.sort(num_array)
print(num_array_sorted)

twodim_array = np.array([[12, -5, 3], [10, 32, -100]])
twodim_array_sorted = np.sort(twodim_array)  # сортиране по редове
print(twodim_array_sorted)

str_array = np.array(["java", "python", "c++"])
str_array_sorted = np.sort(str_array)
print(str_array_sorted)
```
* `searchsorted` - връща позицията (масив от числа) на число (числата в списък) в сортирания масив, ако евентуално е (са) част от масива:
```py
num_location_in_num_array = np.searchsorted(num_array_sorted, 10)
print(num_location_in_num_array)
num_location_in_num_array = np.searchsorted(num_array_sorted, [123, -40, 110])  # array([6, 2, 6], dtype=int64)
```
* `argsort` - връща масив от индексите на числата от масива след тяхното подреждане във възходящ ред
```py
import numpy as np

a = np.array([9, 3, 1, 7, 4, 3, 6])
print(a) # [9, 3, 1, 7, 4, 3, 6]

b = np.argsort(a)
print(b) # [2 1 5 4 6 3 0], т.е. а подреден изглежда по следния начин: [1 3 3 4 6 7 9]
```
* `lexsort(lastsort,firstsort)`

<img width="1055" alt="image" src="https://user-images.githubusercontent.com/114401128/210048785-f463a1b9-0b3e-4852-9ae2-ffef4346c7b7.png">

- реализация в Python:

```py
import numpy as np

a = np.array([9, 3, 1, 3, 4, 3, 6])
b = np.array([4, 6, 9, 2, 1, 8, 7])
print(np.lexsort((b, a))) # [2 3 1 5 4 6 0]
```

- Филтриране:
* `nonzero` - връща индексите на ненулевите елементи
* `where` - връща индексите на елементите, които отговарят на поставеното условие
```py
num_array = np.array([12, -10, 5, 0, -223, 154])
cond_array = np.where(num_array > 0)
print(cond_array)  # (array([0, 2], dtype=int64),)
```
* `extract` - извлича елементи, отговарящи на условие
```py
cond_num_array = np.extract(num_array > 0, num_array)
print(cond_num_array)  # array([12,  5])
```

- `copy` VS `view`
* `copy` е по-добро от view, ако искаме да не променяме първоначалния масив, който сме копирали
```py
a = np.array([1, 2, 3, 4, 5])

b = a.copy()
b[0] = 10

c = a.view()
c[0] = -3

print(a[0], b[0], c[0])  # 1, 10
```



## Задачи
1. Напишете програма, която изчислява стойността на следния математически израз:<br>
(3 * cos(4) - 2 * sin(3)) / (5 * sqrt(6) + 7 * exp(2))<br>
2. Напишете програма, която изчислява площта на кръг с радиус 2,5 с помощта на модула Decimal. Закръглете резултата до два знака след десетичната запетая. След това изчислете разликата между изчислената площ и площта, изчислена с помощта на математическия модул с pi, закръглено до втория знак след десетичната запетая. Отпечатайте разликата.
3. Създайте масив 3x3 numpy с произволни цели числа между 1 и 10. След това изпълнете следните операции върху масива:
- Изчислете сумата на всички елементи в масива
- Изчислете средната стойност на всеки ред в масива
- Заменете всички четни числа в масива с -1
- Преоформете масива в 1D масив и го сортирайте в низходящ ред.
